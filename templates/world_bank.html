{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="keyphrase-extraction-container">
        <h1 class="keyphrase-extraction-title">World Bank</h1>
        <div class="introduction">
            <h2>Introduction</h2>
            <p>This tool allows users to access key country indicators data obtained from the World Bank. It features
                three menus: "Select an indicator," where users can choose from preselected key indicators to obtain
                data; "Select type," offering options "Country" and "Year" to visualize data either for a country over
                the years or for all countries in a single year, respectively; and "Select an option," where users
                select a specific country or year based on the choice made in the "Select type" menu.</p>
        </div>

        <div class="functionality">
            <h2>Functionality</h2>
            <p>Once selections are made, there are three buttons available. To view the data based on the chosen
                criteria, users click "Show Results," which displays the data in a table. To download the table data in
                CSV format, users click the "Download CSV" button. For a visual representation of the data, users can
                click the "Interactive Graph" button to see the data in an interactive graph format.</p>
        </div>
    </div>

    <div class="keyphrase-extraction-container">
        <div class="dropdown-group">
            <label for="indicators">Select an indicator:</label>
            <div class="dropdown-world-bank-topics">
                <button class="dropbtn-world-bank-topics" id="dropdownButton">Choose an Indicator</button>
                <div class="dropdown-content-world-bank-topics" id="dropdownMenu">
                    {% for key in indicators|sort %}
                    <a href="#" onclick="selectIndicator('{{ key }}', '{{ indicators[key] }}')">{{ key }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="dropdown-group">
            <label for="type">Select type:</label>
            <div class="dropdown-world-bank-topics">
                <button class="dropbtn-world-bank-topics" id="typeButton">Choose Data Type</button>
                <div class="dropdown-content-world-bank-topics" id="typeMenu">
                    <a href="#" onclick="selectType('country')">Country</a>
                    <a href="#" onclick="selectType('year')">Year</a>
                </div>
            </div>
        </div>

        <div class="dropdown-group">
            <label for="options">Select an option:</label>
            <div class="dropdown-world-bank-topics">
                <button class="dropbtn-world-bank-topics" id="optionsButton">Choose Country/Year</button>
                <div class="dropdown-content-world-bank-topics" id="optionsMenu">
                    <!-- Options will be inserted here by JavaScript -->
                </div>
            </div>
        </div>
        <div class="button-group">
            <button class="show-results" onclick="showResults()">Show Results</button>
            <button class="download-csv" onclick="downloadCSV()">Download CSV</button>
            <button class="interactive-graph">Interactive Graph</button>
        </div>
    </div>

    <div class="results-container-world-bank" style="display: none;">
        <h3>Results</h3>
        <table class="results-table-world-bank-topics">
            <thead>
                <tr>
                    <th id="countryHeader" class="sortable">
                        Country
                        <span class="sort-icon">&#8597;</span> <!-- Unicode para flecha de ordenamiento vertical -->
                    </th>
                    <th id="dateHeader" class="sortable">
                        Date
                        <span class="sort-icon">&#8597;</span> <!-- Unicode para flecha de ordenamiento vertical -->
                    </th>
                    <th id="valueHeader" class="sortable">
                        Value
                        <span class="sort-icon">&#8597;</span> <!-- Unicode para flecha de ordenamiento vertical -->
                    </th>

                </tr>
            </thead>
            <tbody>
                <!-- Result rows will be inserted here by JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<script src="{{ url_for('static', filename='world_bank.js') }}"></script>
{% endblock %}